# 🏔️ WithUs 서비스 기획 및 기능 명세서 (v4.1 Final)

**MZ세대를 위한 신뢰 기반 여행 동행 플랫폼**
**서비스 핵심 가치:** 콘텐츠(추천) → 계획(플래너) → 연결(동행) → 관리(내 여행)

---

## 📂 1. 주요 메뉴 및 상세 기능 명세

### 🤝 동행 찾기 (Companion)
*   **실시간 모집:** 특정 날짜와 장소를 기반으로 한 동행 모집 게시글 리스트를 제공합니다.
*   **정교한 필터링:** 성별, 나이대뿐만 아니라 MBTI, 예산 스타일, 흡연 여부 등 여행 성향에 따른 맞춤형 검색이 가능합니다.
*   **신뢰 시스템:** 본인 인증 마크, 유저 매너 온도 및 여행 완주 배지 시스템을 구축하여 안전을 강화합니다.
*   **키워드 리뷰:** 여행 종료 후 '시간 엄수' 등 정성적 키워드로 상호 평가하여 유저의 신뢰도를 시각화합니다.
*   **신청 템플릿:** 매칭률 제고를 위해 성향 기반의 자기소개 폼을 제공합니다.
*   **플래너 연동:** 모집글 내 작성자의 여행 일정(요약 동선)이 카드로 자동 노출됩니다.

### 🍱 추천 여행지 (Recipe)
*   **일정 가져오기:** 타인의 Recipe를 내 플래너로 **깊은 복사(Deep Copy)**하여 독립적인 데이터로 저장합니다.
*   **날짜 자동 조정:** 가져온 일정을 내 여행 시작일에 맞춰 T+N일 형태로 일자를 자동 재배치합니다.
*   **데이터 독립성:** 원본 데이터가 삭제되거나 수정되어도 내 플래너의 데이터는 스냅샷으로 영구 보존됩니다.
*   **테마 큐레이션:** #인생샷코스, #가성비배낭여행 등 비주얼 중심의 태그 리스트를 제공합니다.

### 💬 커뮤니티 (Community)
*   **피드형 UI:** 인스타그램 스타일의 이미지 중심 타임라인으로 가독성을 극대화합니다.
*   **컨텍스트 링크:** 피드 하단 "이 코스로 동행 구하기" 버튼을 통해 서비스 간 유기적 연결을 지원합니다.
*   **정보 교환:** 실시간 현지 날씨, 맛집 상황, 여행 꿀팁 등 실시간 정보를 공유합니다.
*   **명예의 전당:** 반응이 뜨거운 게시물은 검토 후 공식 Recipe 섹션으로 승격 등록합니다.

### 🏠 내 여행 (Travel Room)
*   **플래너 (Planner):** 드래그 앤 드롭 방식의 일정 편집 및 지도 동선 최적화 시각화를 제공합니다.
*   **공동 체크리스트:** 확정된 동행자와 함께 준비물을 실시간으로 체크하는 공유 리스트 기능을 지원합니다.
*   **참여 현황:** 확정된 동행 약속 리스트, 대화방 바로가기, 약속 장소/시간 알림을 제공합니다.

---

## 📱 2. PWA 및 오프라인 기술 명세
사용자가 비행기 모드나 현지 통신 장애 상황에서도 핵심 정보를 확인할 수 있도록 구현합니다.

*   **설치 경험 (A2HS):** 브라우저 팝업을 통해 "홈 화면에 앱 추가" 기능을 제공하여 앱과 같은 UX를 구현합니다.
*   **오프라인 캐싱 (Service Worker):** 최근 수정한 플래너 데이터를 IndexedDB에 저장하여 오프라인에서도 일정 확인이 가능합니다.
*   **푸시 알림 (Web Push):** 브라우저가 닫혀 있어도 동행 신청 및 수락 알림을 사용자 기기에 즉각 전송합니다.
*   **백그라운드 동기화:** 오프라인에서 수정한 체크리스트 등을 온라인 복구 시 서버와 자동으로 동기화합니다.

---

## 💡 3. 사용자 시나리오 (UX Flow)

*   **발견 (Discover):** 사용자가 [추천 여행지]에서 루트를 발견하고, PWA 기능을 통해 서비스 앱을 홈 화면에 설치합니다.
*   **가져오기 (Import):** 마음에 드는 루트를 내 [플래너]로 가져오면, 내 여행 시작일에 맞춰 전체 일정이 자동 재배치됩니다.
*   **편집 (Edit):** [내 여행 > 플래너]에서 개인 취향에 맞게 장소를 수정하며, 이 데이터는 원본과 무관한 독립된 스냅샷으로 저장됩니다.
*   **매칭 (Match):** 특정 일정 구간에 대해 [동행 찾기] 글을 올리면, 신청 발생 시 Web Push 알림이 휴대폰에 즉시 도착합니다.
*   **동행 (Companion):** 성향이 맞는 유저를 수락하고, [공동 체크리스트]를 통해 함께 여행 준비를 진행합니다.
*   **현지 활용 (On-Site):** 현지에서 인터넷이 끊겨도 오프라인 캐싱 덕분에 내 플래너 정보를 끊김 없이 확인합니다.

---

## 🛠️ 4. 기술적 핵심 구현 과제

*   **PWA 워크박스(Workbox) 설정:** 정적 자원 및 API 응답 캐싱 전략을 수립합니다.
*   **통합 알림 핸들러:** 단일 함수 호출로 DB 저장과 Web Push/UI Toast 출력을 동시에 처리합니다.
*   **Deep Copy 데이터 설계:** 원본 삭제에 영향받지 않는 독립적 저장 체계(Snapshot)를 구축합니다.
*   **지도 API 연동:** 다중 지점(Pin) 시각화 및 동선(Polyline) 표현 기능을 구현합니다.

---

## 🎨 5. 디자인 톤앤매너

*   **Aesthetic:** Premium Tech + Subtle Warmth 지향
*   **Colors:** Orange/Pink Gradient (Brand), Teal (Support), Cream/White (Base) 사용
*   **Layout:** 하단 탭바(Bottom Navigation)를 활용한 앱 스타일 레이아웃 구성
